{% load i18n %}
<table class="table table-hover">
    <thead class="thead-dark">
        <tr>
            <th>{% trans 'Logo' %}</th>
            <th>{% trans 'Publisher' %}</th>
            <th>{% trans 'Description' %}</th>
        </tr>
    </thead>
    <tbody>
        {% for history in histories %}
            <tr role="button" data-toggle="collapse" data-target="#show{{ history.id }}">
                <td {% ifchanged history.logo %} {% if not forloop.first %} class="bg-warning" {% endif %} {% endifchanged %}>
                    {% load thumbnail %}
                    {% thumbnail history.logo "125x125" crop="center" as im %}
                        <img class="rounded-circle article-img" src="{{im.url}}">
                    {% endthumbnail %}
                </td>
                <td {% ifchanged history.name %} {% if not forloop.first %} class="bg-warning" {% endif %} {% endifchanged %}>{{ history.name }}</td>
                <td {% ifchanged history.description %} {% if not forloop.first %} class="bg-warning" {% endif %} {% endifchanged %}>{{ history.description|truncatechars:20 }}</td>
            </tr>
            <tr id="show{{ history.id }}" class="collapse">
                <td colspan="3">
                    <article class="media content-section">
                        <div {% ifchanged history.logo %} {% if not forloop.first %} class="bg-warning"{% endif %} {% endifchanged %}>
                            {% load thumbnail %}
                            {% thumbnail history.logo "125x125" crop="center" as im %}
                                <a role="button" data-toggle="modal" data-target="#history{{ history.id }}">
                                    <img class="rounded-circle article-img" src="{{ im.url }}">
                                </a>
                            {% endthumbnail %}
                        </div>
                        <div class="media-body">
                            <div class="article-metadata">
                                {% trans 'Created by' %}:
                                <a class="mr-2" href="#">{{ history.modifier.first_name }} {{history.modifier.last_name}}</a>
                                {# Translators: For determine date. #}
                                {# Translators: بۆ دیاریکردنی بەروار (لە). #}
                                <small class="text-muted">{% trans 'in' %} {{ history.timestamp|date:"d/m/Y - H:i:s" }}</small>
                            </div>
                            <h2 class="article-title{% ifchanged history.name %} {% if not forloop.first %} bg-warning{% endif %} {% endifchanged %}">{{ history.name }}</h2>
                            <p class="article-content{% ifchanged history.description %} {% if not forloop.first %} bg-warning{% endif %} {% endifchanged %}">{% trans "Description" %}:
                                <small class="text-muted">{{ history.description }}</small>
                            </p>
                        </div>
                    </article>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{% for history in histories %}
    <!-- The Modal -->
    <div class="modal fade" id="history{{ history.id }}">
        <div class="modal-dialog modal-l">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">{{ history.name }}</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">
                    <img src="{{ history.logo.url }}" class="rounded img-fluid" loading="lazy">
                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">{% trans "Close" %}</button>
                </div>
            </div>
        </div>
    </div>
{% endfor %}